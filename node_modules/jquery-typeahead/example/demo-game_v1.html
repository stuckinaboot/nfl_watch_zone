<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Typeahead Game_v1 Demo</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" href="../src/jquery.typeahead.css">

    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>

    <script src="../src/jquery.typeahead.js"></script>

</head>
<body>

<div style="width: 100%; max-width: 800px; margin: 0 auto;">

    <h1>Game_v1 Demo</h1>

    <ul>
        <li>
            <a href="http://www.runningcoder.org/jquerytypeahead/documentation/">Documentation</a>
        </li>
        <li>
            <a href="http://www.runningcoder.org/jquerytypeahead/demo/">Demos</a>
        </li>
    </ul>

    <form>
        <div class="typeahead__container">
            <div class="typeahead__field">

            <span class="typeahead__query">
                <input class="js-typeahead-input"
                       name="q"
                       type="search"
                       autofocus
                       autocomplete="off">
            </span>
            <span class="typeahead__button">
                <button type="submit">
                    <span class="typeahead__search-icon"></span>
                </button>
            </span>

            </div>
        </div>
    </form>

    <script>

        $.typeahead({
            input: ".js-typeahead-input",
            minLength: 1,
            offset: true,
            maxItem: 15,
            maxItemPerGroup: 10,
            order: "asc",
            hint: true,
            group: true,
            dropdownFilter: "all",
            navigationType: "query",
            selector: {
              hint: 'allo'
            },
            dynamic: true,
            source: {
                game: {
//                    url: ["/search?q={{query}}"]
                    url: [{
                        url: "http://www.gamer-hub.com/game/list.json",
                        dataType: "jsonp"
                    }, "data"]
                },
                category: {
                    url: [{
                        url: "http://www.gamer-hub.com/category/list.json",
                        dataType: "jsonp"
                    }, "data"]
                },
                tag: {
                    url: [{
                        url: "http://www.gamer-hub.com/tag/list.json",
                        dataType: "jsonp"
                    }, "data"]
                }
            },
            callback: {
                onClick: function (node, a, item, event) {

                    console.log('eeeeeeeeeeeeee')

                },
//                onMouseEnter: function (node, a, item, event) {
//                    if (item.group !== "game") {
//                        return false;
//                    }
//
//                    if (!$(a).find('.popover')[0]) {
//
//                        $(a).append(
//                                $('<div/>', {
//                                    "class": "popover fade right in",
//                                    "html": $('<div/>', {
//                                        "class": "popover-content",
//                                        "html": $('<img/>', {
//                                            "src": "http://cdn.gamer-hub.com/images/" +
//                                            item.display.replace(/[\s]|:\s/g, "-")
//                                                    .replace("'", "-")
//                                                    .replace(/-+/g, "-")
//                                                    .toLowerCase()
//                                            + ".jpg"
//                                        })
//                                    }).prepend($('<div/>', {
//                                        "class": "arrow"
//                                    }))
//                                })
//                        );
//
//                    } else {
//                        $(a).find('.popover').removeClass('out').addClass('in');
//                    }
//                },
//                onMouseLeave: function (node, a, item, event) {
//                    if (item.group !== "game") {
//                        return false;
//                    }
//
//                    $(a).find('.popover').removeClass('in').addClass('out');
//                }
            }
        });

    </script>

</div>

</body>
</html>