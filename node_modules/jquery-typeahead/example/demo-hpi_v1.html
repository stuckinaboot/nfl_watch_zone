<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title></title>
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" href="../src/jquery.typeahead.css">

    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <!--script src="../dist/jquery.typeahead.min.js"></script-->
    <script src="../src/jquery.typeahead.js"></script>

</head>
<body>

<div style="width: 100%; max-width: 800px; margin: 0 auto;">

    <h1>Article_v1 Demo</h1>

    <form>
        <div class="typeahead-container">
            <div class="typeahead-field">

            <span class="typeahead-query">
                <input id="q"
                       name="search_items"
                       type="search"
                       autofocus
                       autocomplete="off">
            </span>
            <span class="typeahead-button">
                <button type="submit">
                    <span class="typeahead-search-icon"></span>
                </button>
            </span>

            </div>
        </div>
    </form>

    <script>

        var source = {};
        var dropdownFilter = [];

        source['HPI'] = {
            url: [function (query) {
                return {
                    url: "articles.json",
                    //dataType: "jsonp",
                    data: {
                        p1: query
                    }
                }
            }, "data"]
        };

        source['Vital Signs'] = source['Presenting illness'] = source['Vitals'] = source['Histories'] = source['Review of systems'] = source['Physical exam'] = source['Assessment'] = source['Treatment plan'] = source['Procedures'] = source['Finalize'] = source['Check-out'] = source['Global days'] = source['Care guidelines'] = {
            url: [function (query) {
                return {
                    url: "articles.json",
                    //dataType: "jsonp",
                    data: {
                        p1: query
                    }
                }
            }, "data"]
        };

        source['Histories'].template = '{{name}} - {{seq_no}}'

        dropdownFilter.push({
            key: 'division',
            value: 'HPI',
            display: 'HPI'
        });

        dropdownFilter.push({
            key: 'division',
            value: 'Vital Signs',
            display: 'Vital Signs'
        });

        dropdownFilter.push({value: '*', display: 'All'});

        $("#q").typeahead({
            minLength: 1,
            maxItem: 10,
            maxItemPerGroup: 4,
            order: "asc",
            hint: true,
            cache: false,
            dropdownFilter: dropdownFilter,
            callback: {
                onClick: function (node, a, item, event) {
//                    if (item.hasOwnProperty('set_type') && item.set_type != '' && item.set_type != null)
//                        $scope.$broadcast('addItemFromSearch', item);
                }
            },
            group: ["division", "{{group}}"],
            display: ["name", "city", "division"],
            template: '<span>' +
            '<span class="name">{{name}}</span>' +
            '</span>',
            correlativeTemplate: true,
            dynamic: true,
            source: source,
            debug: true
        });


    </script>


</div>

</body>
</html>